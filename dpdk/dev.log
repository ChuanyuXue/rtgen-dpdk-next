
Author: <Chuanyu> (skewcy@gmail.com)
dev.log (c) 2023
Desc: description
Created:  2023-11-05T19:56:44.025Z


[dpdk-dev] [RFC] mbuf: accurate packet Tx scheduling
    https://yhbt.net/lore/all/2ee95fc5-fa97-c518-fd61-400d667ace34@intel.com/T/



Try to use i225-T1 with tc on RPi, which works very well.



cd /home/ubuntu/tool;sudo mkdir /lib/modules/`uname -r`/kernel/drivers/net/igb/;sudo cp ./igb.ko /lib/modules/`uname -r`/kernel/drivers/net/igb/igb.ko;sudo depmod -a;sudo modprobe i2c_algo_bit;sudo modprobe igb


cd /home/ubuntu/tool
make -C /lib/modules/`uname -r`/build M=$PWD



How to use vtune to check the performance:

    sudo -s
    source /opt/intel/oneapi/vtune/latest/env/vars.sh 
    vtune -collect hotspots -result-dir ./ -- ./a.out




SINGLE CORE:

Total number of packets sent: 100000
Number of failed packets: 67781
Number of missed deadlines: 0
Bandwidth (Mbps): 134.031036
[1]    23088 floating point exception  sudo ./a.out


MULTI CORE:







SINGLE:

EAL: Start sending packets
lcore_id: 0
lcore_id: 9
num_missed_deadlines: lcore1: 9743 lcore2: 0
num_failed: lcore1: 0 lcore2: 0
throughput: lcore1: 41.194691 lcore2: 0.000000


MULTI:
ocket -1)
TELEMETRY: No legacy callbacks, legacy socket not created
EAL: Start sending packets
lcore_id: 0
lcore_id: 9
lcore_id: 10
num_missed_deadlines: lcore1: 20061 lcore2: 19623
num_failed: lcore1: 0 lcore2: 0
throughput: lcore1: 19.965462 lcore2: 19.983683